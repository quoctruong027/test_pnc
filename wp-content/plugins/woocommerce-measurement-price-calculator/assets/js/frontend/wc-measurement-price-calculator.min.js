"use strict";jQuery(function(_){var e,a;function r(a){void 0===wc_price_calculator_params.page_loaded?(function(a){var e,r=_.cookie(wc_price_calculator_params.cookie_name);if(!1===_.isPlainObject(r)||_.isEmptyObject(r))return;for(e in r)!1!==r.hasOwnProperty(e)&&a.find('.amount_needed[name="'+e+'"]:not(.fixed-value), input[name="'+e+'"].qty').val(r[e]);_("form.cart").trigger("wc-measurement-price-calculator-update"),setTimeout(function(a){return function(){a.trigger("mpc-change")}}(a.find("input.amount_needed:first")),100)}(a),wc_price_calculator_params.page_loaded=!0):setTimeout(function(){var r={};a.find(".amount_needed:input, input[name=quantity]").each(function(a,e){r[e.name]=e.value}),_.cookie(wc_price_calculator_params.cookie_name,r)},100)}function p(a,e,r,c){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var t=isFinite(+a)?+a:0,a=isFinite(+e)?Math.abs(e):0,e=void 0===c?",":c,c=void 0===r?".":r,r="";return 3<(r=(a?function(a,e){var r=Math.pow(10,e),c=(n=""+a).indexOf(".");if(-1<c){c+=e,n=n.replace(".","");var t="";String.prototype.startsWith||(String.prototype.startsWith=function(a,e){return e=isNaN(parseInt(e))?0:e,this.indexOf(a,e)===e}),n.startsWith("0")&&(t=n.slice(0,n.length-parseFloat(n).toString().length));var i=n,n=n.slice(0,c);return 5<=i.slice(c,c+1)&&(n=parseFloat(n),n=t+(n=""+(n+=1))),n=n.length<c?(t=c-n.length,n*=Math.pow(10,t),Number(n,10)):Number([n,".",n.slice(c)].join(""),10),""+Math.round(n)/r}return a.toFixed(e)}(t,a):""+Math.round(t)).split("."))[0].length&&(r[0]=r[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,e)),(r[1]||"").length<a&&(r[1]=r[1]||"",r[1]+=new Array(a-r[1].length+1).join("0")),r.join(c)}function u(a,e,r){return void 0!==wc_price_calculator_params.unit_normalize_table[e]&&(void 0!==wc_price_calculator_params.unit_normalize_table[e].inverse&&wc_price_calculator_params.unit_normalize_table[e].inverse?a/=wc_price_calculator_params.unit_normalize_table[e].factor:a*=wc_price_calculator_params.unit_normalize_table[e].factor,e=wc_price_calculator_params.unit_normalize_table[e].unit),void 0!==wc_price_calculator_params.unit_conversion_table[e]&&void 0!==wc_price_calculator_params.unit_conversion_table[e][r]&&(void 0!==wc_price_calculator_params.unit_conversion_table[e][r].inverse&&wc_price_calculator_params.unit_conversion_table[e][r].inverse?a/=wc_price_calculator_params.unit_conversion_table[e][r].factor:a*=wc_price_calculator_params.unit_conversion_table[e][r].factor),a}function l(a){var e;return(e=a.match(/(\d+)\s+(\d+)\/(\d+)/))?0!==e[3]?parseFloat(e[1])+e[2]/e[3]:parseFloat(e[1]):(e=a.match(/(\d+)\/(\d+)/))?0!==e[2]?e[1]/e[2]:0:""===a?0:parseFloat(a)}function m(a){var e=_.trim(wc_price_calculator_params.woocommerce_price_thousand_sep).toString(),r=_.trim(wc_price_calculator_params.woocommerce_price_decimal_sep).toString();return a&&null!==a?isNaN(a)||(a=a.toString()):a="",0<a.length&&(a=(a="."===e?a.replace(/\./g,""):a.replace(new RegExp(e,"g"),"")).replace(r,".")),a}function s(a){var e="",r=wc_price_calculator_params.woocommerce_price_num_decimals,c=wc_price_calculator_params.woocommerce_currency_pos,t=wc_price_calculator_params.woocommerce_currency_symbol;switch(a=p(a,r,wc_price_calculator_params.woocommerce_price_decimal_sep,wc_price_calculator_params.woocommerce_price_thousand_sep),"yes"===wc_price_calculator_params.woocommerce_price_trim_zeros&&0<r&&(a=a.replace(new RegExp(function(a,e){return(a+"").replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(e||"")+"-]","g"),"\\$&")}(wc_price_calculator_params.woocommerce_price_decimal_sep,"/")+"0+$"),"")),c){case"left":e='<span class="amount">'+t+a+"</span>";break;case"right":e='<span class="amount">'+a+t+"</span>";break;case"left_space":e='<span class="amount">'+t+"&nbsp;"+a+"</span>";break;case"right_space":e='<span class="amount">'+a+"&nbsp;"+t+"</span>"}return e}_.cookie.json=!0,_(document).bind("reset_image",function(){wc_price_calculator_params.product_price="",wc_price_calculator_params.product_measurement_value="",wc_price_calculator_params.product_measurement_unit="",_(".variable_price_calculator").hide()}),_(".wc-measurement-price-calculator-input-help").tipTip({attribute:"title",defaultPosition:"left"}),"undefined"!=typeof wc_price_calculator_params&&"pricing"===wc_price_calculator_params.calculator_type&&(_("form.cart").bind("wc-measurement-price-calculator-update",function(){var i,r,c;_(".amount_needed:input").each(function(a,e){e=_(e);var r=l("number"===_(this).attr("type")?e.val():m(e.val()));e.trigger("wc-measurement-price-calculator-product-measurement-change",[r])}),_(".amount_needed:input").each(function(a,e){e=_(e);var r,c,t=l("number"===_(this).attr("type")?e.val():m(e.val()));if(!t||t<0)return i=0,!1;t=u(t,e.data("unit"),e.data("common-unit")),"area-linear"===wc_price_calculator_params.measurement_type?i?i+=2*t:i=2*t:"area-surface"===wc_price_calculator_params.measurement_type?i||(r=u(l(r=m(_("#length_needed").val())),_("#length_needed").data("unit"),_("#length_needed").data("common-unit")),c=u(l(c=m(_("#width_needed").val())),_("#width_needed").data("unit"),_("#width_needed").data("common-unit")),e=u(l(e=m(_("#height_needed").val())),_("#height_needed").data("unit"),_("#height_needed").data("common-unit")),i=2*(r*c+c*e+r*e)):i?i*=t:i=t}),i=u(i,wc_price_calculator_params.product_total_measurement_common_unit,wc_price_calculator_params.product_price_unit),wc_price_calculator_params.pricing_rules&&(r=i,c=null,_.each(wc_price_calculator_params.pricing_rules,function(a,e){if(r>=parseFloat(e.range_start)&&(""===e.range_end||r<=e.range_end))return c=e,!1}),(o=c)?(wc_price_calculator_params.product_price=parseFloat(o.price),_(".single_variation span.price").html(o.price_html)):(wc_price_calculator_params.product_price="",_(".single_variation span.price").html(""))),_("#_measurement_needed").val(i),_("#_measurement_needed_unit").val(wc_price_calculator_params.product_price_unit);var a,e=0,t=parseFloat(wc_price_calculator_params.pricing_overage),n=_(".product_price"),o=_(".product_price_overage");i?(e=wc_price_calculator_params.product_price*i,wc_price_calculator_params.minimum_price>e&&(e=parseFloat(wc_price_calculator_params.minimum_price)),0<t&&(e+=a=e*t,o.html(s(a))),n.html(s(e)).trigger("wc-measurement-price-calculator-product-price-change",[i,e])):(n.html("").trigger("wc-measurement-price-calculator-product-price-change"),0<t&&o.html(""));n=null;(n=_(".wc-measurement-price-calculator-total-amount"))&&(t=wc_price_calculator_params,o=u(i,t.product_price_unit,n.data("unit")),o=parseFloat(i.toFixed(t.measurement_precision)),n.text(p(o,t.measurement_precision,t.woocommerce_price_decimal_sep,t.woocommerce_price_thousand_sep))),"undefined"!=typeof woocommerce_addons_params&&0<_("form.cart").find("#product-addons-total").length&&(woocommerce_addons_params.product_price=(""===e?0:e).toFixed(2),_("form.cart").trigger("woocommerce-product-addons-update"))}),_("form.cart").trigger("wc-measurement-price-calculator-update"),_(".amount_needed:input").on("keyup change mpc-change",function(){var a=_(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}).first().trigger("mpc-change"),_(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){var r=parseFloat(e.price),c=parseFloat(e.minimum_price);wc_price_calculator_params.product_price=r,wc_price_calculator_params.minimum_price=c,_("form.cart").trigger("wc-measurement-price-calculator-show-variation",e),_("form.cart").trigger("wc-measurement-price-calculator-update"),_(".variable_price_calculator").show()}),_(document.body).bind("updated_addons",function(){var a=_("form.cart"),e=a.find("#product-addons-total");e.data("price")!==woocommerce_addons_params.product_price&&0<e.length&&(e.data("price",woocommerce_addons_params.product_price),a.trigger("woocommerce-product-addons-update"))})),"undefined"!=typeof wc_price_calculator_params&&"quantity"===wc_price_calculator_params.calculator_type&&(_("form.cart").bind("wc-measurement-price-calculator-quantity-changed",function(a,t){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];wc_price_calculator_params.product_measurement_value&&(_(e?".amount_needed, .amount_actual":".amount_actual").each(function(a,e){var r,c;e=_(e),1<_(".amount_needed").length||(c=u(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit")),r=parseFloat((c*t).toFixed(2)),c=wc_price_calculator_params,e.is("input")?"number"!==e.attr("type")?e.val(p(r,2,c.woocommerce_price_decimal_sep,c.woocommerce_price_thousand_sep)):e.val(r):e.text(p(r,2,c.woocommerce_price_decimal_sep,c.woocommerce_price_thousand_sep)))}),_(".total_price").html(s(t*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-quantity-total-price-change",[t,wc_price_calculator_params.product_price]))}),e=!1,_("form.cart").bind("wc-measurement-price-calculator-update",function(){var c,a,t;wc_price_calculator_params.product_measurement_value&&(_("input.amount_needed").each(function(a,e){var r=l(m((e=_(e)).val()));if(!r||r<0)return c=0,!1;r=u(r,e.data("unit"),e.data("common-unit")),c?c*=r:c=r}),c&&(a=u(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,wc_price_calculator_params.product_total_measurement_common_unit),(t=Math.ceil((c/a).toFixed(wc_price_calculator_params.measurement_precision)))<parseFloat(wc_price_calculator_params.quantity_range_min_value)&&(t=parseFloat(wc_price_calculator_params.quantity_range_min_value)),e=!!(parseFloat(wc_price_calculator_params.quantity_range_max_value)&&t>parseFloat(wc_price_calculator_params.quantity_range_max_value))&&(t=parseFloat(wc_price_calculator_params.quantity_range_max_value),!0),_("input[name=quantity]").val(t),_(".amount_actual").each(function(a,e){e=_(e);var r=u(wc_price_calculator_params.product_measurement_value,wc_price_calculator_params.product_measurement_unit,e.data("unit")),r=parseFloat((r*t).toFixed(2));e.is("input")?e.val(r):e.text(r)}),e?(_("#stock-discrepancy-warning").remove(),_(".entry-summary").find(".cart").after('<p id="stock-discrepancy-warning" class="woocommerce-error">'+wc_price_calculator_params.stock_warning+"</p>")):_("#stock-discrepancy-warning").remove(),_(".total_price").html(s(t*wc_price_calculator_params.product_price)).trigger("wc-measurement-price-calculator-total-price-change",[t,wc_price_calculator_params.product_price])))}),(a=_(".amount_needed:input")).on("keyup change mpc-change",function(){var a=_(this).closest("form.cart");a.trigger("wc-measurement-price-calculator-update"),r(a)}),a.on("blur mpc-change",function(){var a=_(this).closest("form.cart"),e=_("input[name=quantity]").val();a.trigger("wc-measurement-price-calculator-quantity-changed",[e,!1])}),a.trigger("mpc-change"),_("input[name=quantity]").on("change mpc-change",function(a){var e=_(this).closest("form.cart");e.trigger("wc-measurement-price-calculator-quantity-changed",[a.target.value]),r(e)}).trigger("change"),_(".single_variation, .single_variation_wrap").bind("show_variation",function(a,e){wc_price_calculator_params.product_price=parseFloat(e.price),wc_price_calculator_params.product_measurement_value=parseFloat(e.product_measurement_value),wc_price_calculator_params.product_measurement_unit=e.product_measurement_unit,e.product_measurement_value?(0<_("input.amount_needed").length&&_("input.amount_needed").val()?_("form.cart").trigger("wc-measurement-price-calculator-update"):_("form.cart").trigger("wc-measurement-price-calculator-quantity-changed",[_("input[name=quantity]").val()]),_(".variable_price_calculator").show()):_(".variable_price_calculator").hide()}))});