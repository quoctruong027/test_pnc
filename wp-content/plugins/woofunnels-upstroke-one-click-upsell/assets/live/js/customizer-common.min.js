"use strict";!function(i){i(window).on("load",function(){"undefined"!=typeof wfocu_customizer&&wfocu_customizer.hasOwnProperty("is_loaded")&&"yes"===wfocu_customizer.is_loaded&&0<wfocu_customizer.offer_id&&(_wpCustomizeSettings.changeset.latestAutoDraftUuid=null,wp.customize.bind("changeset-save",function(e,t){t.wfocu_customize="loaded",t.offer_id=wfocu_customizer.offer_id}),wp.customize.bind("save-request-params",function(e){return e.wfocu_customize="loaded",e.offer_id=wfocu_customizer.offer_id,e}),wp.customize("wfocu_c_"+wfocu_customizer.offer_id+"[wfocu_offer_confirmation_offer_confirmation_cart_opener_text]",function(e){e.bind(function(e){setTimeout(function(){var e=i("#customize-preview > iframe").contents(),t=e.find(".wfocu-offer-btn-wrap").height(),o=parseInt(t/2),a=parseInt(o-6);e.find(".wfocu-offer-btn-wrap a").find(".wfocu-left-arrow").css({"border-top-width":o,"border-bottom-width":o,"border-right-width":a,left:-a})},300)})}),wp.customize.state("expandedSection").bind(function(e){var t=i("#customize-preview > iframe").contents();"wfocu_offer_confirmation_offer_confirmation"===e.id?(t.find("body").addClass("wfocu-sidecart-open"),t.find("body.wfocu-sidecart-open .wfocu-offer-btn-wrap").css({right:"355px","z-index":99999})):(t.find("body.wfocu-sidecart-open .wfocu-offer-btn-wrap").css({right:"-355px"}),t.find("body").removeClass("wfocu-sidecart-open"))}),wp.customize.state("changesetStatus").bind(function(e){""!==e&&wp.customize.previewer.refresh()}),wp.customize.state("expandedSection").bind(function(e){if(void 0!==e.id){var t=i("#customize-preview > iframe").contents(),o=t.find('body div[data-scrollto="'+e.id+'"]');0<o.length&&t.find("html, body").animate({scrollTop:o.offset().top},1e3)}}),i("#publish-settings").replaceWith('<button id="wfocu-preview-btn" class="publish-settings button-primary button dashicons dashicons-visibility" title="Publish & Preview"aria-label="" aria-expanded="false" style="display: block;"></button> <button id="wfocu-preset-btn" style="width:32px" class="publish-settings button-primary button dashicons dashicons-admin-customizer" title="Save Preset" aria-label="" aria-expanded="false" style="display: block;"></button>'),i("#customize-outer-theme-controls").replaceWith(wfocu_customizer.save_preset_html),i("#wfocu-preview-btn").on("click",function(e){return e.preventDefault(),window.open(wp.customize.previewer.getFrontendPreviewUrl()),!1}),i("#wfocu-preset-btn").on("click",function(e){e.preventDefault(),i("body").toggleClass("outer-section-open")}),setTimeout(function(){i(document).on("click","#save_wfocu_design",function(){if(i("#save").is(":disabled")){var t=i(this),o=i("#wfocu_template_name");0<o.length&&""!==o.val()?(o.prop("disabled",!0),t.prop("disabled",!0),o.removeClass("wfocu_template_name_error"),i(".wfocu-ajax-loader").removeClass("hide"),i.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_save_template",template_name:o.val(),offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_save_template},success:function(e){i(".wfocu-ajax-loader").addClass("hide"),1==e.status&&(i(".wfocu-save-preset").removeClass("hide"),setTimeout(function(){i(".wfocu-save-preset").addClass("hide")},3e3),0==i(".wfocu_template_holder").length&&i("#wfocu_template_holder").append("<label for='apply-saved-preset-style' class='customize-control-title wfocu_av_template'>Apply Saved Preset Style</label>"),i("#wfocu_template_holder").append(e.msg)),o.val(""),o.removeAttr("disabled"),t.removeAttr("disabled")}})):o.addClass("wfocu_template_name_error")}else alert(wfocu_customizer.preset_message)}),i(document).on("change",".wfocu_template",function(){i(this).is(":checked")&&(i(".wfocu_apply_template").show(),i(".wfocu_apply_preset_ins").show())}),i(document).on("click",".wfocu_apply_template",function(){var e=i(".wfocu_template:checked");if(0<e.length){var t=e.val();""!=t&&(i(".wfocu-ajax-apply-preset-loader").removeClass("hide"),i.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_apply_template",template_slug:t,offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_apply_template},success:function(e){1==e.status&&(i(".wfocu-ajax-apply-preset-loader").addClass("hide"),window.location.reload(0))}}))}}),i(document).on("click",".wfocu_delete_template",function(){var t=i(this);if(0<t.length){var e=t.attr("data-slug");""!=e&&(i(this).parent().find(".wfocu-ajax-delete-loader").removeClass("hide"),i.ajax({url:wfocu_customizer.ajax_url,method:"post",data:{action:"wfocu_delete_template",template_slug:e,offer_id:wfocu_customizer.offer_id,_nonce:wfocu_customizer.wfocu_nonce_delete_template},success:function(e){i(".wfocu-delete-preset").removeClass("hide"),setTimeout(function(){i(".wfocu-delete-preset").addClass("hide")},3e3),1==e.status&&(t.parents(".customize-inside-control-row").fadeOut().remove(),0==i(".wfocu_template_holder").length&&(i(".wfocu_apply_template").hide(),i(".wfocu_av_template").css("display","none")))}}))}})},300))})}(jQuery);