"use strict";jQuery(document).ready(function(i){jQuery(document).on("click",".vi-wpvs-variation-style",function(i){jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation()}),jQuery(document).on("click","body",function(i){jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden")}),jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(document).ajaxComplete(function(i,t,e){return jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),!1})}),jQuery(window).load(function(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})});let viwpvs_frontend=function(i){this.form=i,this.variationData=i.data("product_variations"),this.init()};viwpvs_frontend.prototype.init=function(){let i=this,t=this.form,e=this.variationData;e&&i.check_available_variation(e,t);let a=0,s=0;t.find(".vi-wpvs-select-attribute select").each(function(){let i=jQuery(this).find('option[selected="selected"]'),e=jQuery(this).find('option.vi-wpvs-option-disabled[selected="selected"]');i.length>0&&s++,e.length>0&&(a++,jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).closest(".vi-wpvs-variation-wrap-wrap").find(".vi-wpvs-option-select:first-child").html()),t.hasClass("vi_wpvs_loop_variation_form")&&jQuery(this).val("").trigger("change"))}),s===a&&t.find(".reset_variations").length>0&&t.find(".reset_variations").addClass("vi-wpvs-hidden"),i.design_variation_item(),i.select_variation_item(),t.find(".vi-wpvs-variation-wrap-select-wrap").length&&t.find(".vi-wpvs-variation-wrap-select-wrap").each(function(i,t){let e,a;jQuery(t).parent().parent().parent().css({width:"100%"}),(e=jQuery(t).find(".vi-wpvs-variation-wrap-option")).attr("data-offset_height")||e.attr("data-offset_height",e.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),(a=jQuery(t).find(".vi-wpvs-variation-button-select")).on("click",function(i){let t,a,s,o;i.preventDefault(),i.stopPropagation(),t=parseFloat(e.attr("data-offset_height")),a=jQuery(window).scrollTop(),s=jQuery(window).outerHeight(),o=jQuery(this).offset().top-a,e.addClass("vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-select-top vi-wpvs-variation-wrap-select-bottom"),jQuery(".vi-wpvs-variation-wrap-option:not(.vi-wpvs-variation-wrap-option-show)").addClass("vi-wpvs-hidden"),a>o||a<t||s>o+t+40?e.toggleClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show vi-wpvs-variation-wrap-select-bottom"):e.toggleClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show vi-wpvs-variation-wrap-select-top")})}),i.design_variation_slider(t),t.find(".vi-wpvs-option-wrap").each(function(e,a){let s,o,n,v;s=jQuery(a).closest(".vi-wpvs-variation-wrap-wrap"),(o=s.find("select.vi-wpvs-select-attribute")).find("option").removeClass("vi-wpvs-option-disabled"),jQuery(a).on("mouseenter",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).hasClass("vi-wpvs-product-link")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(e){return e.stopPropagation(),jQuery(this).is(".vi-wpvs-product-link")?(location.href=jQuery(this).data("product_link"),!1):jQuery(this).hasClass("vi-wpvs-option-wrap-disable")?(e.preventDefault(),e.stopPropagation(),!1):(jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(e.preventDefault(),e.stopPropagation()),jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),t.find(".reset_variations").removeClass("vi-wpvs-hidden"),s.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),s.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&(s.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),s.find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).find(".vi-wpvs-option-select").html())),jQuery(this).find(".vi-wpvs-option-radio").length>0&&(s.find(".vi-wpvs-option-radio").prop("checked",!1),jQuery(this).find(".vi-wpvs-option-radio").prop("checked",!0),jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),n=o.val().toString(),(v=jQuery(this).data("attribute_value").toString())!==n?(jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),o.val(v).trigger("change"),i.select_variation_item()):jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(t.hasClass("vi_wpvs_loop_variation_form")?t.data("vpvs_double_click")?(o.val("").trigger("change"),i.select_variation_item()):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):s.data("vpvs_double_click")?(o.val("").trigger("change"),i.select_variation_item()):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),void e.stopPropagation())})}),t.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").change(function(){setTimeout(function(){i.select_variation_item()},500)}),t.find(".reset_variations").on("click",function(){jQuery(this).addClass("vi-wpvs-hidden"),t.find("select.vi-wpvs-select-attribute").val("").trigger("change"),i.select_variation_item(),t.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default"),t.find(".vi-wpvs-option-radio").prop("checked",!1),t.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),t.find(".vi-wpvs-variation-button-select >span ").html(t.find(".vi-wpvs-option-select:first-child").html())})},viwpvs_frontend.prototype.check_available_variation=function(i,t){let e,a=[],s=[],o={},n=0;if(t.find(".vi-wpvs-select-attribute select").each(function(){let i=jQuery(this).val().toString();i&&n++,o[jQuery(this).data("attribute_name")]=i}),n>0){if(1===(e=Object.getOwnPropertyNames(o)).length)return jQuery.each(i,function(i,t){let s=t.attributes[e[0]];s&&-1===a.indexOf(s)&&a.push(s)}),a.length>0&&(a.push(""),t.find(".vi-wpvs-select-attribute select option").each(function(i,t){let e=jQuery(t).val().toString();-1===jQuery.inArray(e,a)&&jQuery(t).addClass("vi-wpvs-option-disabled")})),!1;for(let n=0;n<e.length;n++){let v=e[n],r=o[v];if(!r||""===r)for(let i=0;i<e.length;i++){if(n==i)continue;let a=e[i];t.find('.vi-wpvs-select-attribute select[name="'+a+'"] option').removeClass("vi-wpvs-option-disabled")}jQuery.each(i,function(i,o){if(!o.attributes[v])return t.find('select[name ="'+v+'"]').addClass("vi-wpvs-select-option-show"),!0;if(-1===a.indexOf(o.attributes[v])&&a.push(o.attributes[v]),r==o.attributes[v]){t.find('option[value ="'+o.attributes[v]+'"]').removeClass("vi-wpvs-option-disabled"),-1===s.indexOf(o.attributes[v])&&s.push(o.attributes[v]);for(let i=0;i<e.length;i++){let n=e[i];o.attributes[n]&&n!==v&&(t.find('option[value ="'+o.attributes[n]+'"]').removeClass("vi-wpvs-option-disabled"),-1===s.indexOf(o.attributes[n])&&s.push(o.attributes[n]),-1===a.indexOf(o.attributes[n])&&a.push(o.attributes[n]))}}else for(let i=0;i<e.length;i++){let a=e[i];""===o.attributes[a]||null===o.attributes[a]?t.find('select[name ="'+a+'"]').addClass("vi-wpvs-select-option-show"):""!==r&&null!==r&&a!==v&&-1===s.indexOf(o.attributes[a])&&t.find('option[value ="'+o.attributes[a]+'"]').addClass("vi-wpvs-option-disabled")}})}}else jQuery.each(i,function(i,e){let s,o=e.attributes,n=Object.getOwnPropertyNames(e.attributes);for(s=0;s<n.length;s++){let i=n[s];if(""===o[i]||null===o[i])return t.find('select[name ="'+i+'"]').addClass("vi-wpvs-select-option-show"),!0;-1===a.indexOf(o[i])&&a.push(o[i])}});a.length>0&&(a.push(""),t.find(".vi-wpvs-select-attribute select:not(.vi-wpvs-select-option-show) option").each(function(i,t){let e=jQuery(t).val().toString();-1===jQuery.inArray(e,a)&&jQuery(t).addClass("vi-wpvs-option-disabled")})),t.find(".vi-wpvs-select-attribute select").removeClass("vi-wpvs-select-option-show")},viwpvs_frontend.prototype.design_variation_item=function(){let i=this.form;i.find(".vi-wpvs-variation-wrap-wrap").each(function(){let i=jQuery(this).parent().parent();jQuery(this).parent().addClass("vi-wpvs-variation-style-content"),i.find(".vi-wpvs-select-attribute   select").addClass("vi-wpvs-select-attribute"),i.addClass(i.find(".vi-wpvs-variation-wrap").data("display_type"))}),i.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(i,t){let e=jQuery(t).data("option_color");jQuery(t).css({background:e})}),i.find(".vi-wpvs-variation-wrap-wrap").removeClass("vi-wpvs-hidden"),i.find(".vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-top,.vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-bottom").each(function(){let i=jQuery(this).outerWidth();jQuery(this).css({"margin-left":"-"+i/2+"px"})}),i.find(".vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-left,.vi-wpvs-option-tooltip.vi-wpvs-option-tooltip-right").each(function(){let i=jQuery(this).outerHeight();jQuery(this).css({"margin-top":"-"+i/2+"px"})})},viwpvs_frontend.prototype.design_variation_slider=function(i){let t=i.find(".vi-wpvs-variation-wrap-slider").closest(".vi-wpvs-variation-wrap-wrap");if(0===t.length)return!1;t.each(function(i,t){let e=jQuery(t).find(".vi-wpvs-option-wrap").first().innerWidth(),a=jQuery(t).find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").index();a=a>0?a:0,jQuery(t).flexslider({namespace:"vi-wpvs-slider-",selector:".vi-wpvs-variation-wrap-slider .vi-wpvs-option-wrap",animation:"slide",animationLoop:!1,startAt:a,itemWidth:e,itemMargin:8,controlNav:!1,maxItems:5,slideshow:!1,reverse:!1,move:1,touch:!0})})},viwpvs_frontend.prototype.select_variation_item=function(){this.form.find(".vi-wpvs-variation-wrap-wrap").each(function(i,t){let e=jQuery(t).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});jQuery(t).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(i,t){let a=jQuery(t).data("attribute_value").toString();-1!==jQuery.inArray(a,e)?jQuery(t).removeClass("vi-wpvs-option-wrap-disable"):jQuery(t).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})})},jQuery.fn.viwpvs_woo_product_variation_swatches=function(){return new viwpvs_frontend(this),this};